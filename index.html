<html>
    <script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-base.min.js"></script>
    <div>

        <label for="startMon">Starting money:</label>
        <input type="text" id="startMon" name="startMon"><br><br>

        <label for="endMon">Ending money:</label>
        <input type="text" id="endMon" name="endMon"><br><br>

        <label for="day">Day:</label>
        <input type="text" id="day" name="day"><br><br>

        <label for="name">First letter of your name:</label>
        <input type="text" id="name" name="name"><br><br>

        <button type="button" id="enter">Enter values</button>

        <button type="button" id="show">Show graph</button>

        <div id="container" style="width: 100%; height: 100%; margin: 0; padding: 0;"></div>

        

    </div>

<html>

<script>

    function graph(){
        if (noShow == false){
            for (let i = 1; i <= length; i++){
                        let storedW = localStorage.getItem("diffW;" + String(i))
                        dataW.push([String(i), storedW])
                    }
            let dataSetW = anychart.data.set(dataW);        
            //console.log(test)
            let seriesDataW = dataSetW.mapAs({'x': 0, 'value': 1});
            let chartW = anychart.line();
            chartW.title('Will\'s graph');
            chartW.yAxis().title('Money won/lossed');
            let lineChartW = chartW.line(seriesDataW);
            chartW.container('container');
            chartW.draw();
            dataW = []

        }else{
            for (let i = 1; i <= length; i++){
                    let storedW = localStorage.getItem("diffW;" + String(i))
                    dataW.push([String(i), storedW])
                }
            let dataSetW = anychart.data.set(dataW);        
            //console.log(test)
            let seriesDataW = dataSetW.mapAs({'x': 0, 'value': 1});
            let chartW = anychart.line();
            chartW.title('Will\'s graph');
            chartW.yAxis().title('Money won/lossed');
            let lineChartW = chartW.line(seriesDataW);
            chartW.container('container');
            dataW = []
        }


    }
    let noShow = false
    let length = Object.keys(localStorage).length
    let diffW = []
    let dataW = []
    let enter = document.getElementById("enter").addEventListener("click", calcAndDisplay);
    let show = document.getElementById("show").addEventListener("click", graph);
    let container = document.getElementById('container')

    function calcAndDisplay(){
        let name = document.getElementById('name').value
        let startMon = document.getElementById('startMon').value
        let endMon = document.getElementById('endMon').value
        let day = document.getElementById('day').value


        if (confirm('ARE YOU SURE YOU WANT TO ENTER THIS DATA!!!')){
            let moneyDifW = endMon - startMon

            if (name === 'W'){
                noShow = true
                localStorage.setItem("diffW;" + String(day), moneyDifW)
                diffW.push(moneyDifW)
                console.log(dataW)
                graph()

            }else{
                console.log('name incorrect. nothing stored')
            }
         
        }else{
        }
        noShow =  false
        


    }
    


</script>