<html>
<body style="margin: 0px; padding: 0px;">

    <script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-base.min.js"></script>
    <div style = 'background-color: #474747'>

        <label for="startMon" style="color: white">Starting money:</label>
        <input type="text" id="startMon" name="startMon"><br><br>

        <label for="endMon" style="color: white">Ending money:</label>
        <input type="text" id="endMon" name="endMon"><br><br>

        <label for="day" style="color: white">Day:</label>
        <input type="text" id="day" name="day"><br><br>

        <label for="name" style="color: white">First letter of your name:</label>
        <input type="text" id="name" name="name"><br><br>

        <button type="button" id="enter">Enter values</button>

        <button type="button" id="show">Show graph</button>

    <div id="container" style="width: 100%; height: 100%; margin: 0; padding: 0;"></div>


    </div>


</body>


<html>

<script>
    let noShowW = false
    let length = Object.keys(localStorage).length
    let diffW = []
    let enterW = document.getElementById("enter").addEventListener("click", calcAndDisplayW);
    let showW = document.getElementById("show").addEventListener("click", graphW);
    let container = document.getElementById('container')
    if (typeof localStorage['dataW'] == 'undefined'){
        localStorage['dataW'] = JSON.stringify([])
    }
    
    

    function graphW(name){

        let dataW = JSON.parse(localStorage.getItem('dataW'))
            

        
        if (noShowW == false){

                
            for (let i = 1; i <= Object.keys(localStorage).length; i++){
                let storedW = localStorage.getItem("diffW;" + String(i))
                dataW.push([String(i), storedW])
                console.log('test')
            }

            dataW.pop()
            localStorage['dataW'] = JSON.stringify(dataW);
            


            for (let i = 1; i <= Object.keys(localStorage).length; i++){
                let storedZ = localStorage.getItem("diffZ;" + String(i))
                console.log(dataW[0][0])
                if (localStorage['dataW'][i - 1][0] == String(i)){
                    localStorage['dataW'][i - 1].push(storedZ)

                }

            }

            console.log(dataW)
            //dataW.pop()
            localStorage['dataW'] = JSON.stringify(dataW);
                
            let dataSetW = anychart.data.set(dataW);        
            //console.log(test)
            let seriesDataW = dataSetW.mapAs({'x': 0, 'value': 1});
            let chartW = anychart.line();
            chartW.title('Will\'s graph');
            chartW.yAxis().title('Money won/lossed');
            let lineChartW = chartW.line(seriesDataW);
            chartW.container('container');
            chartW.draw();
            

        }else{
            if (name == 'W'){
                
                for (let i = 1; i <= Object.keys(localStorage).length; i++){
                    let storedW = localStorage.getItem("diffW;" + String(i))
                    dataW.push([String(i), storedW])
                    
                    console.log('test')
                }
                dataW.pop()
                console.log(dataW)
                localStorage['dataW'] = JSON.stringify(dataW);

            }else if (name == 'Z'){
                localStorage['dataW'] = JSON.stringify(dataW);
                for (let i = 1; i <= Object.keys(localStorage).length; i++){
                    let storedZ = localStorage.getItem("diffZ;" + String(i))
                    if (dataW[0][0] == String(i)){
                        dataW[0].push(storedZ)

                    }

                }
                //dataW.pop()
                console.log(dataW)
                localStorage['dataW'] = JSON.stringify(dataW);
                
                
            }

            let dataSetW = anychart.data.set(dataW);        
            //console.log(test)
            let seriesDataW = dataSetW.mapAs({'x': 0, 'value': 1});
            let chartW = anychart.line();
            chartW.title('gamble graph');
            chartW.yAxis().title('Money won/lossed');
            let lineChartW = chartW.line(seriesDataW);
            chartW.container('container');
            
        }


    }

    let check = true
    function calcAndDisplayW(){
        let name = document.getElementById('name').value
        let startMon = document.getElementById('startMon').value
        let endMon = document.getElementById('endMon').value
        let day = document.getElementById('day').value
        


        if (confirm('ARE YOU SURE YOU WANT TO ENTER THIS DATA!!!')){
            let moneyDifW = endMon - startMon

            if (name == 'W'){
                let dataW = JSON.parse(localStorage.getItem('dataW'))
                noShowW = true
                
                if (dataW.length == 0){
                    dataW.push([String(day), String(moneyDifW)])
                }else{
                    for (let i = 0; i <= dataW.length - 1; i++){
                        if (dataW[i][0] == String(day)){
                            console.log('test')
                            dataW[i].push(moneyDifW)
                            break
                            
                        }
                    }
            
                    if (dataW[dataW.length - 1][0] != String(day)){
                        dataW.push([String(day), moneyDifW])
                    }
                    
                    
                    
                    
                }

                localStorage['dataW'] = JSON.stringify(dataW);
                //localStorage.setItem("diffZ;" + String(day), moneyDifW)
                //diffW.push(moneyDifW)
                //graphW(name)
                
            }else if (name == 'Z'){
                let dataW = JSON.parse(localStorage.getItem('dataW'))
                noShowW = true
                
                if (dataW.length == 0){
                    dataW.push([String(day), String(moneyDifW)])
                }else{
                    for (let i = 0; i <= dataW.length - 1; i++){
                        if (dataW[i][0] == String(day)){
                            console.log('test')
                            dataW[i].push(moneyDifW)
                            break
                            
                        }
                    }
                
                    if (dataW[dataW.length - 1][0] != String(day)){
                        dataW.push([String(day), moneyDifW])
                    }
                                    
                    
                    
                }

                localStorage['dataW'] = JSON.stringify(dataW);
                //localStorage.setItem("diffZ;" + String(day), moneyDifW)
                //diffW.push(moneyDifW)
                //graphW(name)
                
            }else if (name == 'N'){
                let dataW = JSON.parse(localStorage.getItem('dataW'))
                noShowW = true
                
                if (dataW.length == 0){
                    dataW.push([String(day), String(moneyDifW)])
                }else{
                    for (let i = 0; i <= dataW.length - 1; i++){
                        if (dataW[i][0] == String(day)){
                            console.log('test')
                            dataW[i].push(moneyDifW)
                            break
                            
                        }
                    }
                

                    if (dataW[dataW.length - 1][0] != String(day)){
                        dataW.push([String(day), moneyDifW])
                    }                    
                    
                    
                }

                localStorage['dataW'] = JSON.stringify(dataW);
                //localStorage.setItem("diffZ;" + String(day), moneyDifW)
                //diffW.push(moneyDifW)
                //graphW(name)
                
            }else{ 
            }
        }

    }
    


</script>